const translations = {
    'en': {
        'activities': 'Activities',
        'activities-description': 'Welcome to our activities page. Here you will find the weekly events calendar and important notes about our activities.',
        'weekly-events': 'Weekly Events',
        'important-notes': 'Important Notes',
        'note-1': 'All activities are free and open to the community.',
        'note-2': 'To participate in special activities, please register in advance.',
        'note-3': 'Schedules may change, please check the calendar to confirm.',
        'note-4': 'For more information, contact us by phone or email.',
        'events': 'Events',
        'meetings': 'Meetings',
        'meetings-description': 'Welcome to our meetings page. Here you will find our weekly schedule of activities.',
        'sunday': 'Sunday',
        'sunday-school': 'Sunday School',
        'sunday-school-time': '10:30 - 11:15',
        'sunday-school-description': 'Classes for children, adults and teenagers',
        'main-service': 'Main Service',
        'main-service-time': '11:30 - 13:00+',
        'monday': 'Monday',
        'tuesday': 'Tuesday',
        'wednesday': 'Wednesday',
        'thursday': 'Thursday',
        'friday': 'Friday',
        'saturday': 'Saturday',
        'no-meetings': 'No scheduled meetings',
        'prayer-study': 'Prayer and Bible Study Meeting',
        'prayer-study-time': '18:00 - 19:30',
        'bible-study': 'In-person Bible Study',
        'bible-study-time': '15:00',
        'online-bible-study': 'Online Bible Study',
        'online-bible-study-time': '19:30',
        'youth-meeting': 'Youth',
        'men': 'Men',
        'women': 'Women',
        'general': 'General',
        'welcome': 'Welcome to New Life Church',
        'youth-activities': 'Youth Activities',
        'youth-description': 'Join our youth group for fun activities and spiritual growth.',
        'community-service': 'Community Service',
        'community-description': 'Make a difference in our community through various service projects.',
        'worship': 'Worship',
        'worship-description': 'Experience the power of worship through music and prayer.',
        'learn-more': 'Learn More',
        'our-activities': 'Our Activities',
        'join-us': 'Join Us',
        'prayer-group': 'Prayer Group',
        'prayer-group-description': 'Join our prayer group to lift up your needs and intercede for others.',
        'music-ministry': 'Music Ministry',
        'music-ministry-description': 'Use your musical talents to glorify God in our worship services.',
        'upcoming-events': 'Upcoming Events',
        'youth-event-description': 'Join us for an exciting youth meeting with games, worship, and a powerful message.',
        'every-friday': 'Every Friday',
        'details': 'Details',
        'men-event-description': 'A special gathering for men to connect, grow spiritually, and support each other.',
        'first-saturday': 'First Saturday',
        'women-event-description': 'A time for women to come together, share experiences, and grow in faith.',
        'second-saturday': 'Second Saturday',
        'general-event-description': 'Join our entire church community for special celebrations and gatherings.',
        'last-sunday': 'Last Sunday',
        'meeting-schedule': 'Meeting Schedule',
        'sunday-service': 'Sunday Service',
        'main-hall': 'Main Hall',
        'sunday-service': 'Sunday Service',
        'sunday-service-description': 'Join us for worship, prayer, and a powerful message from God\'s word.',
        'classroom-1': 'Classroom 1',
        'bible-study-description': 'Deep dive into God\'s word with our weekly Bible study group.',
        'prayer-meeting': 'Prayer Meeting',
        'prayer-room': 'Prayer Room',
        'prayer-meeting-description': 'Join us for a powerful time of prayer and intercession.',
        'youth-center': 'Youth Center',
        'youth-meeting-description': 'A fun and engaging time for young people to connect and grow in faith.',
        'choir-practice': 'Choir Practice',
        'music-room': 'Music Room',
        'choir-practice-description': 'Join our choir for practice and prepare for Sunday worship.',
        'leadership-meeting': 'Leadership Meeting',
        'conference-room': 'Conference Room',
        'leadership-meeting-description': 'Monthly meeting for church leaders to plan and coordinate activities.',
        'about-us': 'About Us',
        'about-description': 'We are a welcoming community dedicated to spreading God\'s message about love and justice.',
        'contact': 'Contact',
        'address': 'Francisco Joaqu√≠n Mu√±oz 3376, 11300 Montevideo, Departamento de Montevideo',
        'phone': '26227763',
        'email': 'iebnuevid@gmail.com',
        'follow-us': 'Follow Us',
        'church-name': 'New Life Church',
        'all-rights': 'All rights reserved',
        'meetings-title': 'Meeting Schedule',
        'meetings-description': 'Check our meeting and service schedules during the week',
        'sunday-school': 'Sunday School for children, adults and teenagers',
        'main-meeting': 'Main Meeting',
        'lat-lng': '-34.9024273,-56.1415788'
    },
    'pt': {
        'activities': 'Atividades',
        'activities-description': 'Bem-vindo √† nossa p√°gina de atividades. Aqui voc√™ encontrar√° o calend√°rio de eventos semanais e notas importantes sobre nossas atividades.',
        'weekly-events': 'Eventos da Semana',
        'important-notes': 'Notas Importantes',
        'note-1': 'Todas as atividades s√£o gratuitas e abertas √† comunidade.',
        'note-2': 'Para participar de atividades especiais, por favor registre-se com anteced√™ncia.',
        'note-3': 'Os hor√°rios podem mudar, consulte o calend√°rio para confirmar.',
        'note-4': 'Para mais informa√ß√µes, entre em contato conosco por telefone ou e-mail.',
        'events': 'Eventos',
        'meetings': 'Reuni√µes',
        'meetings-description': 'Bem-vindo √† nossa p√°gina de reuni√µes. Aqui voc√™ encontrar√° nossa programa√ß√£o semanal de atividades.',
        'sunday': 'Domingo',
        'sunday-school': 'Escola Dominical',
        'sunday-school-time': '10:30 - 11:15',
        'sunday-school-description': 'Aulas para crian√ßas, adultos e adolescentes',
        'main-service': 'Culto Principal',
        'main-service-time': '11:30 - 13:00+',
        'monday': 'Segunda-feira',
        'tuesday': 'Ter√ßa-feira',
        'wednesday': 'Quarta-feira',
        'thursday': 'Quinta-feira',
        'friday': 'Sexta-feira',
        'saturday': 'S√°bado',
        'no-meetings': 'N√£o h√° reuni√µes programadas',
        'prayer-study': 'Reuni√£o de Ora√ß√£o e Estudo B√≠blico',
        'prayer-study-time': '18:00 - 19:30',
        'bible-study': 'Estudo B√≠blico Presencial',
        'bible-study-time': '15:00',
        'online-bible-study': 'Estudo B√≠blico Online',
        'online-bible-study-time': '19:30',
        'youth-meeting': 'Jovens',
        'men': 'Homens',
        'women': 'Mulheres',
        'general': 'Geral',
        'welcome': 'Bem-vindo √† Igreja Nova Vida',
        'youth-activities': 'Atividades para Jovens',
        'youth-description': 'Junte-se ao nosso grupo de jovens para atividades divertidas e crescimento espiritual.',
        'community-service': 'Servi√ßo Comunit√°rio',
        'community-description': 'Fa√ßa a diferen√ßa em nossa comunidade atrav√©s de v√°rios projetos de servi√ßo.',
        'worship': 'Adora√ß√£o',
        'worship-description': 'Experimente o poder da adora√ß√£o atrav√©s da m√∫sica e da ora√ß√£o.',
        'learn-more': 'Saiba Mais',
        'our-activities': 'Nossas Atividades',
        'join-us': 'Junte-se a N√≥s',
        'prayer-group': 'Grupo de Ora√ß√£o',
        'prayer-group-description': 'Junte-se ao nosso grupo de ora√ß√£o para elevar suas necessidades e interceder por outros.',
        'music-ministry': 'Minist√©rio de M√∫sica',
        'music-ministry-description': 'Use seus talentos musicais para glorificar a Deus em nossos cultos.',
        'upcoming-events': 'Pr√≥ximos Eventos',
        'youth-event-description': 'Junte-se a n√≥s para uma emocionante reuni√£o de jovens com jogos, adora√ß√£o e uma poderosa mensagem.',
        'every-friday': 'Toda Sexta-feira',
        'details': 'Detalhes',
        'men-event-description': 'Um encontro especial para homens se conectarem, crescerem espiritualmente e apoiarem uns aos outros.',
        'first-saturday': 'Primeiro S√°bado',
        'women-event-description': 'Um momento para as mulheres se reunirem, compartilharem experi√™ncias e crescerem na f√©.',
        'second-saturday': 'Segundo S√°bado',
        'general-event-description': 'Junte-se a toda a nossa comunidade da igreja para celebra√ß√µes e encontros especiais.',
        'last-sunday': '√öltimo Domingo',
        'meeting-schedule': 'Programa√ß√£o de Reuni√µes',
        'sunday-service': 'Culto de Domingo',
        'main-hall': 'Sal√£o Principal',
        'sunday-service-description': 'Junte-se a n√≥s para adora√ß√£o, ora√ß√£o e uma poderosa mensagem da palavra de Deus.',
        'classroom-1': 'Sala de Aula 1',
        'bible-study-description': 'Mergulhe na palavra de Deus com nosso grupo semanal de estudo b√≠blico.',
        'prayer-meeting': 'Reuni√£o de Ora√ß√£o',
        'prayer-room': 'Sala de Ora√ß√£o',
        'prayer-meeting-description': 'Junte-se a n√≥s para um poderoso momento de ora√ß√£o e intercess√£o.',
        'youth-center': 'Centro de Jovens',
        'youth-meeting-description': 'Um momento divertido e envolvente para os jovens se conectarem e crescerem na f√©.',
        'choir-practice': 'Ensaio do Coral',
        'music-room': 'Sala de M√∫sica',
        'choir-practice-description': 'Junte-se ao nosso coral para ensaiar e se preparar para a adora√ß√£o de domingo.',
        'leadership-meeting': 'Reuni√£o de Lideran√ßa',
        'conference-room': 'Sala de Confer√™ncia',
        'leadership-meeting-description': 'Reuni√£o mensal para l√≠deres da igreja planejarem e coordenarem atividades.',
        'about-us': 'Sobre N√≥s',
        'about-description': 'Somos uma comunidade acolhedora dedicada a espalhar a mensagem de Deus sobre o amor e a justi√ßa.',
        'contact': 'Contato',
        'address': 'Francisco Joaqu√≠n Mu√±oz 3376, 11300 Montevideo, Departamento de Montevideo',
        'phone': '26227763',
        'email': 'iebnuevid@gmail.com',
        'follow-us': 'Siga-nos',
        'church-name': 'Igreja Nova Vida',
        'all-rights': 'Todos os direitos reservados',
        'meetings-title': 'Hor√°rio de Reuni√µes',
        'meetings-description': 'Confira nossos hor√°rios de reuni√µes e cultos durante a semana',
        'sunday-school': 'Escola dominical crian√ßas, adultos e adolescentes',
        'main-meeting': 'Reuni√£o principal',
        'lat-lng': '-34.9024273,-56.1415788'
    },
    'es': {
        'activities': 'Actividades',
        'activities-description': 'Bienvenido a nuestra p√°gina de actividades. Aqu√≠ encontrar√°s el calendario de eventos semanales y notas importantes sobre nuestras actividades.',
        'weekly-events': 'Eventos de la Semana',
        'important-notes': 'Notas Importantes',
        'note-1': 'Todas las actividades son gratuitas y abiertas a la comunidad.',
        'note-2': 'Para participar en actividades especiales, por favor reg√≠strese con anticipaci√≥n.',
        'note-3': 'Los horarios pueden cambiar, consulte el calendario para confirmar.',
        'note-4': 'Para m√°s informaci√≥n, cont√°ctenos por tel√©fono o correo electr√≥nico.',
        'events': 'Eventos',
        'meetings': 'Reuniones',
        'meetings-description': 'Bienvenido a nuestra p√°gina de reuniones. Aqu√≠ encontrar√°s el horario semanal de nuestras actividades.',
        'sunday': 'Domingo',
        'sunday-school': 'Escuela Dominical',
        'sunday-school-time': '10:30 - 11:15',
        'sunday-school-description': 'Clases para ni√±os, adultos y adolescentes',
        'main-service': 'Servicio Principal',
        'main-service-time': '11:30 - 13:00+',
        'monday': 'Lunes',
        'tuesday': 'Martes',
        'wednesday': 'Mi√©rcoles',
        'thursday': 'Jueves',
        'friday': 'Viernes',
        'saturday': 'S√°bado',
        'no-meetings': 'No hay reuniones programadas',
        'prayer-study': 'Reuni√≥n de Oraci√≥n y Estudio B√≠blico',
        'prayer-study-time': '18:00 - 19:30',
        'bible-study': 'Estudio B√≠blico Presencial',
        'bible-study-time': '15:00',
        'online-bible-study': 'Estudio B√≠blico Online',
        'online-bible-study-time': '19:30',
        'youth-meeting': 'J√≥venes',
        'men': 'Hombres',
        'women': 'Mujeres',
        'general': 'General',
        'welcome': 'Bienvenido a la Iglesia Nueva Vida',
        'youth-activities': 'Actividades para J√≥venes',
        'youth-description': '√önete a nuestro grupo de j√≥venes para actividades divertidas y crecimiento espiritual.',
        'community-service': 'Servicio Comunitario',
        'community-description': 'Haz la diferencia en nuestra comunidad a trav√©s de varios proyectos de servicio.',
        'worship': 'Adoraci√≥n',
        'worship-description': 'Experimenta el poder de la adoraci√≥n a trav√©s de la m√∫sica y la oraci√≥n.',
        'learn-more': 'M√°s Informaci√≥n',
        'our-activities': 'Nuestras Actividades',
        'join-us': '√önete a Nosotros',
        'prayer-group': 'Grupo de Oraci√≥n',
        'prayer-group-description': '√önete a nuestro grupo de oraci√≥n para elevar tus necesidades e interceder por otros.',
        'music-ministry': 'Ministerio de M√∫sica',
        'music-ministry-description': 'Usa tus talentos musicales para glorificar a Dios en nuestros servicios de adoraci√≥n.',
        'upcoming-events': 'Pr√≥ximos Eventos',
        'youth-event-description': '√önete a nosotros para una emocionante reuni√≥n de j√≥venes con juegos, adoraci√≥n y un poderoso mensaje.',
        'every-friday': 'Todos los Viernes',
        'details': 'Detalles',
        'men-event-description': 'Un encuentro especial para que los hombres se conecten, crezcan espiritualmente y se apoyen mutuamente.',
        'first-saturday': 'Primer S√°bado',
        'women-event-description': 'Un momento para que las mujeres se re√∫nan, compartan experiencias y crezcan en la fe.',
        'second-saturday': 'Segundo S√°bado',
        'general-event-description': '√önete a toda nuestra comunidad de la iglesia para celebraciones y encuentros especiales.',
        'last-sunday': '√öltimo Domingo',
        'meeting-schedule': 'Horario de Reuniones',
        'sunday-service': 'Servicio Dominical',
        'main-hall': 'Sal√≥n Principal',
        'sunday-service-description': '√önete a nosotros para adoraci√≥n, oraci√≥n y un poderoso mensaje de la palabra de Dios.',
        'classroom-1': 'Aula 1',
        'bible-study-description': 'Profundiza en la palabra de Dios con nuestro grupo semanal de estudio b√≠blico.',
        'prayer-meeting': 'Reuni√≥n de Oraci√≥n',
        'prayer-room': 'Sala de Oraci√≥n',
        'prayer-meeting-description': '√önete a nosotros para un poderoso momento de oraci√≥n e intercesi√≥n.',
        'youth-center': 'Centro Juvenil',
        'youth-meeting-description': 'Un momento divertido y atractivo para que los j√≥venes se conecten y crezcan en la fe.',
        'choir-practice': 'Ensayo del Coro',
        'music-room': 'Sala de M√∫sica',
        'choir-practice-description': '√önete a nuestro coro para ensayar y prepararte para la adoraci√≥n del domingo.',
        'leadership-meeting': 'Reuni√≥n de Liderazgo',
        'conference-room': 'Sala de Conferencias',
        'leadership-meeting-description': 'Reuni√≥n mensual para que los l√≠deres de la iglesia planifiquen y coordinen actividades.',
        'about-us': 'Sobre Nosotros',
        'about-description': 'Somos una comunidad acogedora dedicada a difundir el mensaje de Dios sobre el amor y la justicia.',
        'contact': 'Contacto',
        'address': 'Francisco Joaqu√≠n Mu√±oz 3376, 11300 Montevideo, Departamento de Montevideo',
        'phone': '26227763',
        'email': 'iebnuevid@gmail.com',
        'follow-us': 'S√≠guenos',
        'church-name': 'Iglesia Nueva Vida',
        'all-rights': 'Todos los derechos reservados',
        'meetings-title': 'Horario de Reuniones',
        'meetings-description': 'Consulte nuestros horarios de reuniones y servicios durante la semana',
        'sunday-school': 'Escuela dominical para ni√±os, adultos y adolescentes',
        'main-meeting': 'Reuni√≥n principal',
        'lat-lng': '-34.9024273,-56.1415788'
    }
};

// Fun√ß√£o para carregar conte√∫do da p√°gina
function loadPageContent(url) {
    const contentContainer = document.getElementById('content-container');
    if (!contentContainer) return;

    // Remover a parte do dom√≠nio e query params da URL
    const cleanUrl = url.replace(/^.*\/\/[^\/]+/, '').split('?')[0];
    
    // Atualizar o idioma ap√≥s carregar o conte√∫do
    updatePageLanguage();
    
    // Atualizar links ativos
    updateActiveLinks(cleanUrl);
}

// Fun√ß√£o para atualizar links ativos
function updateActiveLinks(currentPath) {
    const navigationLinks = document.querySelectorAll('.nav-links a');
    
    navigationLinks.forEach(link => {
        const href = link.getAttribute('href');
        
        // Remover classe active de todos os links
        link.classList.remove('active');
        
        // Adicionar classe active se o link corresponder √† p√°gina atual
        if (currentPath === href || 
            (currentPath.includes('/events/') && href === '../events.html') ||
            (currentPath === '/' && href === 'index.html')) {
            link.classList.add('active');
        }
    });
}

// Fun√ß√£o para inicializar navega√ß√£o
function initNavigation() {
    const navigationLinks = document.querySelectorAll('.nav-links a');
    
    navigationLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            const href = this.getAttribute('href');
            
            // Permitir navega√ß√£o normal para links externos ou de dropdown
            if (href.startsWith('http') || 
                (window.innerWidth <= 768 && this.closest('.dropdown-content')) ||
                (window.innerWidth > 768 && this.closest('.dropdown-content'))) {
                return;
            }
            
            e.preventDefault();
            
            // Atualizar URL e hist√≥rico
            history.pushState({}, '', href);
            
            // Carregar conte√∫do
            loadPageContent(href);
            
            // Fechar menu m√≥vel
            const mobileNav = document.querySelector('.nav-links');
            const mobileMenuButton = document.querySelector('.mobile-menu-button');
            if (mobileNav && mobileMenuButton) {
                mobileNav.classList.remove('active');
                mobileMenuButton.classList.remove('active');
                mobileMenuButton.setAttribute('aria-expanded', 'false');
            }
        });
    });
    
    // Lidar com navega√ß√£o do hist√≥rico
    window.addEventListener('popstate', () => {
        loadPageContent(window.location.pathname);
    });
}

// Fun√ß√£o para inicializar menu m√≥vel
function initMobileMenu() {
    const mobileMenuButton = document.querySelector('.mobile-menu-button');
    const navLinks = document.querySelector('.nav-links');
    const dropdowns = document.querySelectorAll('.dropdown');

    if (mobileMenuButton && navLinks) {
        // Toggle do menu m√≥vel
        mobileMenuButton.addEventListener('click', () => {
            const isOpen = navLinks.classList.toggle('active');
            mobileMenuButton.classList.toggle('active');
            mobileMenuButton.setAttribute('aria-expanded', isOpen);
        });

        // Fechar menu ao clicar fora
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.nav-links') && !e.target.closest('.mobile-menu-button')) {
                navLinks.classList.remove('active');
                mobileMenuButton.classList.remove('active');
                mobileMenuButton.setAttribute('aria-expanded', 'false');
                dropdowns.forEach(d => d.classList.remove('active'));
            }
        });

        // Gerenciar dropdowns no mobile
        dropdowns.forEach(dropdown => {
            const dropdownLink = dropdown.querySelector('a');
            
            dropdownLink.addEventListener('click', (e) => {
                if (window.innerWidth <= 768) {
                    e.preventDefault();
                    dropdowns.forEach(d => {
                        if (d !== dropdown) d.classList.remove('active');
                    });
                    dropdown.classList.toggle('active');
                }
            });
        });
    }
}

// Inicializa√ß√£o quando o DOM estiver pronto
document.addEventListener('DOMContentLoaded', function() {
    initLanguageSelector();
    initMobileMenu();
    initNavigation();
    
    // Carregar conte√∫do inicial
    loadPageContent(window.location.pathname);
});

// Fun√ß√£o para inicializar o seletor de idioma
function initLanguageSelector() {
    const languageButton = document.querySelector('.language-button');
    const languageDropdown = document.querySelector('.language-dropdown');
    const languageOptions = document.querySelectorAll('.language-option');
    const currentLanguageSpan = document.querySelector('.current-language');
    
    if (!languageButton || !languageDropdown || !languageOptions.length || !currentLanguageSpan) {
        return;
    }
    
    // Toggle do dropdown de idioma
    languageButton.addEventListener('click', function(e) {
        e.stopPropagation();
        languageDropdown.classList.toggle('active');
    });
    
    // Fechar dropdown ao clicar fora
    document.addEventListener('click', function(e) {
        if (!e.target.closest('.language-selector')) {
            languageDropdown.classList.remove('active');
        }
    });
    
    // Sele√ß√£o de idioma
    languageOptions.forEach(option => {
        option.addEventListener('click', function() {
            const lang = this.getAttribute('data-lang');
            const flag = this.getAttribute('data-flag');
            
            updateLanguage(lang, flag);
            languageDropdown.classList.remove('active');
        });
    });
    
    // Carregar idioma salvo
    const savedLanguage = localStorage.getItem('language') || 'es';
    const flags = {
        'es': 'üá∫üáæ',
        'pt': 'üáßüá∑',
        'en': 'üá∫üá∏'
    };
    currentLanguageSpan.textContent = flags[savedLanguage] || savedLanguage.toUpperCase();
    
    // Atualizar o idioma inicial da p√°gina
    updateLanguage(savedLanguage);
}

// Fun√ß√£o para atualizar o idioma
function updateLanguage(lang, flag = null) {
    localStorage.setItem('language', lang);
    
    // Atualizar o texto do bot√£o de idioma
    const currentLanguageSpan = document.querySelector('.current-language');
    if (currentLanguageSpan) {
        const flags = {
            'es': 'üá∫üáæ',
            'pt': 'üáßüá∑',
            'en': 'üá∫üá∏'
        };
        currentLanguageSpan.textContent = flag || flags[lang] || lang.toUpperCase();
    }
    
    // Atualizar o idioma do documento
    document.documentElement.lang = lang;
    
    // Atualizar o t√≠tulo da p√°gina
    const titleElement = document.querySelector('title');
    if (titleElement && translations[lang] && translations[lang]['church-name']) {
        titleElement.textContent = translations[lang]['church-name'];
    }
    
    // Atualizar todos os elementos traduz√≠veis
    const elements = document.querySelectorAll('[data-translate]');
    elements.forEach(element => {
        const key = element.getAttribute('data-translate');
        if (translations[lang] && translations[lang][key]) {
            if (element.tagName.toLowerCase() === 'input' && element.type === 'submit') {
                element.value = translations[lang][key];
            } else {
                element.textContent = translations[lang][key];
            }
        }
    });
}

// Controle do menu m√≥vel
document.addEventListener('DOMContentLoaded', function() {
    const mobileMenuButton = document.querySelector('.mobile-menu-button');
    const navLinks = document.querySelector('.nav-links');

    if (mobileMenuButton && navLinks) {
        mobileMenuButton.addEventListener('click', function() {
            navLinks.classList.toggle('active');
            const isOpen = navLinks.classList.contains('active');
            mobileMenuButton.setAttribute('aria-expanded', isOpen);
        });

        // Fechar menu ao clicar em um link
        const navItems = document.querySelectorAll('.nav-links a');
        navItems.forEach(item => {
            item.addEventListener('click', () => {
                navLinks.classList.remove('active');
                mobileMenuButton.setAttribute('aria-expanded', 'false');
            });
        });
    }
});